"use strict";window.django={jQuery:jQuery.noConflict(!0)};{const $=django.jQuery;function showAdminPopup(triggeringLink,name_regexp,add_popup){const name=triggeringLink.id.replace(name_regexp,"");let href=triggeringLink.href;add_popup&&(-1===href.indexOf("?")?href+="?_popup=1":href+="&_popup=1");const win=window.open(href,name,"height=500,width=800,resizable=yes,scrollbars=yes");return win.focus(),!1}function showRelatedObjectLookupPopup(triggeringLink){return showAdminPopup(triggeringLink,/^lookup_/,!0)}function dismissRelatedLookupPopup(win,chosenId){const name=win.name,elem=document.getElementById(name);elem.classList.contains("vManyToManyRawIdAdminField")&&elem.value?elem.value+=","+chosenId:document.getElementById(name).value=chosenId,win.close()}function showRelatedObjectPopup(triggeringLink){return showAdminPopup(triggeringLink,/^(change|add|delete)_/,!1)}function updateRelatedObjectLinks(triggeringLink){const $this=$(triggeringLink),siblings=$this.nextAll(".view-related, .change-related, .delete-related");if(!siblings.length)return;const value=$this.val();value?siblings.each((function(){const elm=$(this);elm.attr("href",elm.attr("data-href-template").replace("__fk__",value))})):siblings.removeAttr("href")}function dismissAddRelatedObjectPopup(win,newId,newRepr){const name=win.name,elem=document.getElementById(name);if(elem){const elemName=elem.nodeName.toUpperCase();"SELECT"===elemName?elem.options[elem.options.length]=new Option(newRepr,newId,!0,!0):"INPUT"===elemName&&(elem.classList.contains("vManyToManyRawIdAdminField")&&elem.value?elem.value+=","+newId:elem.value=newId),$(elem).trigger("change")}else{const toId=name+"_to",o=new Option(newRepr,newId);SelectBox.add_to_cache(toId,o),SelectBox.redisplay(toId)}win.close()}function dismissChangeRelatedObjectPopup(win,objId,newRepr,newId){const id=win.name.replace(/^edit_/,""),selectsSelector=interpolate("#%s, #%s_from, #%s_to",[id,id,id]),selects=$(selectsSelector);selects.find("option").each((function(){this.value===objId&&(this.textContent=newRepr,this.value=newId)})),selects.next().find(".select2-selection__rendered").each((function(){this.lastChild.textContent=newRepr,this.title=newRepr})),win.close()}function dismissDeleteRelatedObjectPopup(win,objId){const id=win.name.replace(/^delete_/,""),selectsSelector=interpolate("#%s, #%s_from, #%s_to",[id,id,id]),selects=$(selectsSelector);selects.find("option").each((function(){this.value===objId&&$(this).remove()})).trigger("change"),win.close()}window.showRelatedObjectLookupPopup=showRelatedObjectLookupPopup,window.dismissRelatedLookupPopup=dismissRelatedLookupPopup,window.showRelatedObjectPopup=showRelatedObjectPopup,window.updateRelatedObjectLinks=updateRelatedObjectLinks,window.dismissAddRelatedObjectPopup=dismissAddRelatedObjectPopup,window.dismissChangeRelatedObjectPopup=dismissChangeRelatedObjectPopup,window.dismissDeleteRelatedObjectPopup=dismissDeleteRelatedObjectPopup,window.showAddAnotherPopup=showRelatedObjectPopup,window.dismissAddAnotherPopup=dismissAddRelatedObjectPopup,$(document).ready((function(){$("a[data-popup-opener]").on("click",(function(event){event.preventDefault(),opener.dismissRelatedLookupPopup(window,$(this).data("popup-opener"))})),$("body").on("click",".related-widget-wrapper-link",(function(e){if(e.preventDefault(),this.href){const event=$.Event("django:show-related",{href:this.href});$(this).trigger(event),event.isDefaultPrevented()||showRelatedObjectPopup(this)}})),$("body").on("change",".related-widget-wrapper select",(function(e){const event=$.Event("django:update-related");$(this).trigger(event),event.isDefaultPrevented()||updateRelatedObjectLinks(this)})),$(".related-widget-wrapper select").trigger("change"),$("body").on("click",".related-lookup",(function(e){e.preventDefault();const event=$.Event("django:lookup-related");$(this).trigger(event),event.isDefaultPrevented()||showRelatedObjectLookupPopup(this)}))}))}